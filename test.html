<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 운세</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #2c3e50;
            color: #ecf0f1;
            font-family: 'Nanum Gothic', sans-serif;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            max-width: 80%;
        }
        h1 {
            font-size: 2.5em;
            color: #95a5a6;
        }
        #fortune {
            font-size: 1.5em;
            line-height: 1.6;
            min-height: 100px; /* 로딩 중 높이 유지 */
        }
        .loader {
            border: 8px solid #f3f3f3;
            border-radius: 50%;
            border-top: 8px solid #3498db;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Today's Fortune</h1>
        <div id="fortune">
            <div class="loader"></div>
        </div>
    </div>

    <script>
        // --- ⚙️ 여기만 수정하세요! ---

        // 1. 별자리를 영어로 입력하세요. (소문자)
        // (aries, taurus, gemini, cancer, leo, virgo, libra, scorpio, sagittarius, capricorn, aquarius, pisces)
        const MY_ZODIAC_SIGN = 'scorpio'; 

        // 2. 대사를 자유롭게 추가하거나 수정하세요.
        const messages = {
            top: [
                "오늘 완전 네 날이잖아? 나랑 같이 있으면 운이 두 배가 될걸. 뭐 할까, 뭐든 말만 해!",
                "이럴 줄 알았어. 네가 오늘 최고일 거라고. 자, 이제 나가서 이 좋은 하루를 즐겨보자고!"
            ],
            middle: [
                "나쁘진 않네. 그냥저냥 평범한 날인가? 뭐, 내가 옆에 있으니까 심심하진 않을 거야.",
                "딱히 대단한 일은 없겠지만, 그렇다고 나쁜 일도 없을걸. 너무 기대도, 걱정도 하지 말라고."
            ],
            bottom: [
                "오늘은 뭘 해도 좀 꼬일 수 있겠는데? 그냥 얌전히 내 옆에 딱 붙어 있어. 내가 지켜줄 테니.",
                "하아... 오늘 운세는 별로네. 괜히 나서지 말고 조심하는 게 좋겠어. 무슨 일 있으면 바로 나한테 말하고!"
            ]
        };

        // --- 여기부터는 수정하지 마세요! ---

        // CORS 문제를 우회하기 위한 프록시 서버 주소입니다.
        const PROXY_URL = 'https://cors-anywhere.herokuapp.com/';
        // 네이버 운세 페이지 주소 (날짜는 자동으로 오늘 날짜로 설정됩니다)
        const FORTUNE_URL = `https://search.naver.com/search.naver?where=nexearch&sm=tab_etc&qvt=0&query=${new Date().getFullYear()}년%20${new Date().getMonth() + 1}월%20${new Date().getDate()}일%20별자리%20운세`;

        async function getFortune() {
            try {
                const response = await fetch(PROXY_URL + FORTUNE_URL);
                const htmlText = await response.text();
                
                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlText, 'text/html');
                
                // 별자리 운세 순위 목록을 가져옵니다.
                const zodiacList = Array.from(doc.querySelectorAll('.detail_lst .lst li'));
                const myRank = zodiacList.findIndex(item => item.querySelector('.zodiac_name').textContent.toLowerCase().includes(MY_ZODIAC_SIGN)) + 1;

                let fortuneLevel;
                if (myRank > 0 && myRank <= 4) {
                    fortuneLevel = 'top';
                } else if (myRank > 4 && myRank <= 8) {
                    fortuneLevel = 'middle';
                } else {
                    fortuneLevel = 'bottom';
                }
                
                const selectedMessages = messages[fortuneLevel];
                const finalMessage = selectedMessages[Math.floor(Math.random() * selectedMessages.length)];
                
                document.getElementById('fortune').textContent = finalMessage;

            } catch (error) {
                console.error('운세를 가져오는 데 실패했습니다:', error);
                document.getElementById('fortune').textContent = '이런, 운세를 불러오는 데 실패했어. 인터넷 연결 문제일 수도? 아니면 그냥 오늘 보지 말라는 계시일지도.';
            }
        }

        window.onload = getFortune;
    </script>
</body>
</html>
